import os
import sys

def rename_files_sequentially(directory_path):
    # Check if the directory exists
    if not os.path.isdir(directory_path):
        print(f"Error: Directory '{directory_path}' not found.")
        return False
    
    # Get all files in the directory
    try:
        files = [f for f in os.listdir(directory_path) if os.path.isfile(os.path.join(directory_path, f))]
    except Exception as e:
        print(f"Error accessing directory: {e}")
        return False
    
    # Sort files to ensure consistent ordering
    files.sort()
    
    # Counter for renamed files
    counter = 1
    
    # List to track renamed files
    renamed_files = []
    
    # Rename each file
    for file_name in files:
        # Create the new file name
        new_name = f"youtube-cookies-{counter}.txt"
        
        # Full paths
        old_path = os.path.join(directory_path, file_name)
        new_path = os.path.join(directory_path, new_name)
        
        # Skip if the file already has the target name
        if file_name == new_name:
            print(f"Skipping {file_name} (already has target name)")
            counter += 1
            continue
        
        # Rename the file
        try:
            os.rename(old_path, new_path)
            print(f"Renamed: {file_name} -> {new_name}")
            renamed_files.append((file_name, new_name))
            counter += 1
        except Exception as e:
            print(f"Error renaming {file_name}: {e}")
    
    # Summary
    print(f"\nRenamed {len(renamed_files)} files.")
    return True

if __name__ == "__main__":
    # Use the directory path from command line if provided, otherwise use hardcoded path
    if len(sys.argv) > 1:
        directory_path = sys.argv[1]
    else:
        directory_path = "/Users/mateofioritorocha/Downloads/youtube-cookies-3"
    
    print(f"Renaming files in: {directory_path}")
    rename_files_sequentially(directory_path)